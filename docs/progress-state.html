<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Progress and state | taxize book</title>
  <meta name="description" content="taxize manual" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Progress and state | taxize book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="taxize manual" />
  <meta name="github-repo" content="ropensci/taxize-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Progress and state | taxize book" />
  
  <meta name="twitter:description" content="taxize manual" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="classification.html"/>
<link rel="next" href="errors.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">taxize book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> taxize manual</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#info"><i class="fa fa-check"></i><b>1.1</b> Info</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#citing-taxize"><i class="fa fa-check"></i><b>1.2</b> Citing taxize</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.3</b> Installation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#user-interface"><i class="fa fa-check"></i><b>2.1</b> User interface</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#related-tools"><i class="fa fa-check"></i><b>2.2</b> Related tools</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>3</b> Data sources</a></li>
<li class="chapter" data-level="4" data-path="authentication.html"><a href="authentication.html"><i class="fa fa-check"></i><b>4</b> Authentication</a></li>
<li class="chapter" data-level="5" data-path="identifiers.html"><a href="identifiers.html"><i class="fa fa-check"></i><b>5</b> Identifiers</a><ul>
<li class="chapter" data-level="5.1" data-path="identifiers.html"><a href="identifiers.html#get-functions"><i class="fa fa-check"></i><b>5.1</b> get functions</a></li>
<li class="chapter" data-level="5.2" data-path="identifiers.html"><a href="identifiers.html#get-functions-return-objects"><i class="fa fa-check"></i><b>5.2</b> get functions return objects</a></li>
<li class="chapter" data-level="5.3" data-path="identifiers.html"><a href="identifiers.html#identifier-notes"><i class="fa fa-check"></i><b>5.3</b> identifier notes</a></li>
<li class="chapter" data-level="5.4" data-path="identifiers.html"><a href="identifiers.html#looking-up-taxa-on-the-web"><i class="fa fa-check"></i><b>5.4</b> Looking up taxa on the web</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="classification.html"><a href="classification.html"><i class="fa fa-check"></i><b>6</b> Classification</a><ul>
<li class="chapter" data-level="6.1" data-path="classification.html"><a href="classification.html#classification-usage"><i class="fa fa-check"></i><b>6.1</b> Usage</a></li>
<li class="chapter" data-level="6.2" data-path="classification.html"><a href="classification.html#other-sections"><i class="fa fa-check"></i><b>6.2</b> Other sections?</a></li>
<li class="chapter" data-level="6.3" data-path="classification.html"><a href="classification.html#classification-related"><i class="fa fa-check"></i><b>6.3</b> Related</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="progress-state.html"><a href="progress-state.html"><i class="fa fa-check"></i><b>7</b> Progress and state</a><ul>
<li class="chapter" data-level="7.1" data-path="progress-state.html"><a href="progress-state.html#progress"><i class="fa fa-check"></i><b>7.1</b> Progress</a></li>
<li class="chapter" data-level="7.2" data-path="progress-state.html"><a href="progress-state.html#state"><i class="fa fa-check"></i><b>7.2</b> State</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="errors.html"><a href="errors.html"><i class="fa fa-check"></i><b>8</b> Errors</a><ul>
<li class="chapter" data-level="8.1" data-path="errors.html"><a href="errors.html#errors-http"><i class="fa fa-check"></i><b>8.1</b> HTTP errors</a><ul>
<li class="chapter" data-level="8.1.1" data-path="errors.html"><a href="errors.html#data-provider-errors-500-series-http-errors"><i class="fa fa-check"></i><b>8.1.1</b> Data provider errors: 500 series HTTP errors</a></li>
<li class="chapter" data-level="8.1.2" data-path="errors.html"><a href="errors.html#user-errors-400-series-http-errors"><i class="fa fa-check"></i><b>8.1.2</b> User errors: 400 series HTTP errors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="other-packages.html"><a href="other-packages.html"><i class="fa fa-check"></i><b>9</b> Other packages</a><ul>
<li class="chapter" data-level="9.1" data-path="other-packages.html"><a href="other-packages.html#taxize-built-on"><i class="fa fa-check"></i><b>9.1</b> packages taxize leverages</a><ul>
<li class="chapter" data-level="9.1.1" data-path="other-packages.html"><a href="other-packages.html#package-bold"><i class="fa fa-check"></i><b>9.1.1</b> package: bold</a></li>
<li class="chapter" data-level="9.1.2" data-path="other-packages.html"><a href="other-packages.html#package-rredlist"><i class="fa fa-check"></i><b>9.1.2</b> package: rredlist</a></li>
<li class="chapter" data-level="9.1.3" data-path="other-packages.html"><a href="other-packages.html#package-rotl"><i class="fa fa-check"></i><b>9.1.3</b> package: rotl</a></li>
<li class="chapter" data-level="9.1.4" data-path="other-packages.html"><a href="other-packages.html#package-ritis"><i class="fa fa-check"></i><b>9.1.4</b> package: ritis</a></li>
<li class="chapter" data-level="9.1.5" data-path="other-packages.html"><a href="other-packages.html#package-worrms"><i class="fa fa-check"></i><b>9.1.5</b> package: worrms</a></li>
<li class="chapter" data-level="9.1.6" data-path="other-packages.html"><a href="other-packages.html#package-natserv"><i class="fa fa-check"></i><b>9.1.6</b> package: natserv</a></li>
<li class="chapter" data-level="9.1.7" data-path="other-packages.html"><a href="other-packages.html#package-wikitaxa"><i class="fa fa-check"></i><b>9.1.7</b> package: wikitaxa</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="other-packages.html"><a href="other-packages.html#related-packages"><i class="fa fa-check"></i><b>9.2</b> related packages</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="taxizedb.html"><a href="taxizedb.html"><i class="fa fa-check"></i><b>10</b> taxizedb</a><ul>
<li class="chapter" data-level="10.1" data-path="taxizedb.html"><a href="taxizedb.html#other-sections-1"><i class="fa fa-check"></i><b>10.1</b> other sections</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="usage.html"><a href="usage.html"><i class="fa fa-check"></i><b>11</b> Usage</a><ul>
<li class="chapter" data-level="11.1" data-path="usage.html"><a href="usage.html#taxize-citations"><i class="fa fa-check"></i><b>11.1</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="contributing.html"><a href="contributing.html"><i class="fa fa-check"></i><b>12</b> Contributing</a><ul>
<li class="chapter" data-level="12.1" data-path="contributing.html"><a href="contributing.html#contribute-taxize-book"><i class="fa fa-check"></i><b>12.1</b> Contributing to this book</a></li>
<li class="chapter" data-level="12.2" data-path="contributing.html"><a href="contributing.html#contribute-taxize"><i class="fa fa-check"></i><b>12.2</b> Contributing to taxize</a><ul>
<li class="chapter" data-level="12.2.1" data-path="contributing.html"><a href="contributing.html#bugs"><i class="fa fa-check"></i><b>12.2.1</b> Bugs?</a></li>
<li class="chapter" data-level="12.2.2" data-path="contributing.html"><a href="contributing.html#code-contributions"><i class="fa fa-check"></i><b>12.2.2</b> Code contributions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="session-info.html"><a href="session-info.html"><i class="fa fa-check"></i><b>13</b> session info</a></li>
<li class="divider"></li>
<li>(c) Scott Chamberlain, 2019</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">taxize book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="progress-state" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Progress and state</h1>
<p>In <code>taxize</code> <code>v0.9.8</code> a new set of features was introduced to keep
track of progress of going through each name passed to <code>get_*()</code> functions,
better messages about progress and better summary info, and the ability
to restart from where you left off if a <code>get_*()</code> function gets interrupted.</p>
<div id="progress" class="section level2">
<h2><span class="header-section-number">7.1</span> Progress</h2>
<p>Within each <code>get_*()</code> function we keep track of progress. We do this
using the <code>progressor</code> R6 class, an internal <code>taxize</code> class. <code>progessor</code>
is not meant to be used by the taxize user. Within each <code>get_*()</code> function
we initiate a new progress object:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">prog &lt;-<span class="st"> </span>progressor<span class="op">$</span><span class="kw">new</span>(...)</a></code></pre></div>
<p>As the <code>get_*()</code> function progresses the <code>prog</code> object is updated with
data and metadata as each name is gone through in the for loop. In addition,
<code>prog</code> handles nice print statements and summary info, which can
also be suppressed as needed.</p>
<p><code>progressor</code> is not exported but when you have <code>taxize</code> loaded you
can go to its manual file (<code>?progressor</code>) to dig into how it works.</p>
<p><code>taxize_options()</code> is a new function in <code>taxize</code>, introduced in <code>v.0.9.8</code>.
It is meant to manage package wide options in general. The first option it
has is <code>taxon_state_messages</code>, which is a boolean (default: <code>TRUE</code>) which
controls messages printed by <code>progressor</code> - you can set
<code>taxon_state_messages=FALSE</code> if you want to suppress messages from
<code>progressor</code>.</p>
<p>Messages look like:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">get_uid</span>(<span class="kw">c</span>(<span class="st">&quot;Chironomus riparius&quot;</span>, <span class="st">&quot;howdy&quot;</span>))</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; ══  2 queries  ═══════════════</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; Retrieving data for taxon &#39;Chironomus riparius&#39;</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; ✔  Found:  Chironomus+riparius</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; Retrieving data for taxon &#39;howdy&#39;</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; ✖  Not Found:  foo bar</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; ══  Results  ═════════════════</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt; ● Total: 2</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt; ● Found: 1</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">#&gt; ● Not Found: 1</span></a></code></pre></div>
<p>Giving:</p>
<ul>
<li><code>2 queries</code>: number of names being searched</li>
<li><code>Retrieving data for ...</code>: which name is being searched</li>
<li><code>✔  Found: ...</code>: when a name is found, there’s a <code>✔</code> and the name</li>
<li><code>✖  Not Found: ...</code>: when a name is not found, there’s a <code>✖</code> and the name</li>
<li>At the end is a summary of number of names searched, number of names
found and number of names not found</li>
</ul>
</div>
<div id="state" class="section level2">
<h2><span class="header-section-number">7.2</span> State</h2>
<p>The first parameter of every <code>get_*()</code> function now accepts either one or
more taxonomic names <em>OR</em> a <code>taxon_state</code> object. A <code>taxon_state</code> object is
an R6 object that helps keep track of where you are in a <code>get_*()</code> function
call. The TLDR is that it means if you’re <code>get_*()</code> function gets interrupted
because of any number of things (e.g., internet goes out, the dreaded curl
timeout, you hit the wrong key, the remote data provider temporarily goes down)
you can call <code>taxon_last()</code> and pass that in to your <code>get_*()</code> function to
start from where you left off before the interruption.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">spp &lt;-<span class="st"> </span><span class="kw">names_list</span>(<span class="st">&quot;species&quot;</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">res &lt;-<span class="st"> </span><span class="kw">get_gbifid</span>(spp)</a></code></pre></div>
<pre><code>#&gt; ══  3 queries  ═══════════════
#&gt; ✔  Found:  Astragalus longibracteatus
#&gt; ✔  Found:  Helianthella iostephanoides
#&gt; ✔  Found:  Cocconerion balansae
#&gt; ══  Results  ═════════════════
#&gt; 
#&gt; ● Total: 3 
#&gt; ● Found: 3 
#&gt; ● Not Found: 0</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">z &lt;-<span class="st"> </span><span class="kw">taxon_last</span>()</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">z</a></code></pre></div>
<pre><code>#&gt; &lt;taxon state&gt; 
#&gt;  class: gbifid
#&gt;  elapsed (sec): 4.36
#&gt;  count: 3
#&gt;   Astragalus longibracteatus: 5629667
#&gt;   Helianthella iostephanoides: 5704620
#&gt;   Cocconerion balansae: 3070696</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">z<span class="op">$</span><span class="kw">taxa_remaining</span>()</a></code></pre></div>
<pre><code>#&gt; character(0)</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">z<span class="op">$</span><span class="kw">taxa_completed</span>()</a></code></pre></div>
<pre><code>#&gt; [1] &quot;Astragalus longibracteatus&quot;  &quot;Cocconerion balansae&quot;       
#&gt; [3] &quot;Helianthella iostephanoides&quot;</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">z<span class="op">$</span>count <span class="co"># active binding; no parens needed</span></a></code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
<p>See <code>?taxon_state</code> with <code>taxize</code> loaded to get all the details on working
with taxon state objects.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="classification.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="errors.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci/taxize-book/edit/master/06-state.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
